<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì„±ì  ê³„ì‚° í”„ë¡œê·¸ë¨</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      h1 {
        text-align: center;
        color: #333;
      }
      /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
      .input-section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .form-row {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 15px;
      }
      .form-group {
        display: flex;
        flex-direction: column;
      }
      .form-group label {
        font-weight: bold;
        margin-bottom: 5px;
        color: #555;
      }
      .form-group input {
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 14px;
        width: 120px;
      }
      .form-group input:focus {
        outline: none;
        border-color: #4a90d9;
      }
      button {
        background-color: #4a90d9;
        color: white;
        border: none;
        padding: 10px 30px;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      button:hover {
        background-color: #357abd;
      }
      /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
      .table-section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 12px;
        text-align: center;
        border-bottom: 1px solid #ddd;
      }
      th {
        background-color: #4a90d9;
        color: white;
      }
      tr:hover {
        background-color: #f9f9f9;
      }
      .no-data {
        text-align: center;
        color: #888;
        padding: 20px;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ“ ì„±ì  ê³„ì‚° í”„ë¡œê·¸ë¨</h1>

    <!-- ì…ë ¥ í¼ ì„¹ì…˜ -->
    <div class="input-section">
      <h2>í•™ìƒ ì •ë³´ ì…ë ¥</h2>
      <form id="studentForm">
        <div class="form-row">
          <div class="form-group">
            <label for="studentId">í•™ë²ˆ</label>
            <input type="text" id="studentId" placeholder="ì˜ˆ: 20240001" />
          </div>
          <div class="form-group">
            <label for="name">ì´ë¦„</label>
            <input type="text" id="name" placeholder="ì˜ˆ: í™ê¸¸ë™" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="kor">êµ­ì–´</label>
            <input
              type="number"
              id="kor"
              min="0"
              max="100"
              placeholder="0~100"
            />
          </div>
          <div class="form-group">
            <label for="eng">ì˜ì–´</label>
            <input
              type="number"
              id="eng"
              min="0"
              max="100"
              placeholder="0~100"
            />
          </div>
          <div class="form-group">
            <label for="math">ìˆ˜í•™</label>
            <input
              type="number"
              id="math"
              min="0"
              max="100"
              placeholder="0~100"
            />
          </div>
        </div>
        <button type="submit">ì¶”ê°€ (Add)</button>
      </form>
    </div>

    <!-- í…Œì´ë¸” ì¶œë ¥ ì„¹ì…˜ -->
    <div class="table-section">
      <h2>í•™ìƒ ëª©ë¡</h2>
      <table id="studentTable">
        <thead>
          <tr>
            <th>No</th>
            <th>í•™ë²ˆ</th>
            <th>ì´ë¦„</th>
            <th>êµ­ì–´</th>
            <th>ì˜ì–´</th>
            <th>ìˆ˜í•™</th>
            <th>í•©ê³„</th>
            <th>í‰ê· </th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì˜ì—­ -->
        </tbody>
      </table>
      <p id="noData" class="no-data">ë“±ë¡ëœ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>
    </div>

    <script>
      // ===== Student í´ë˜ìŠ¤ ì •ì˜ =====
      /* class Student {
            constructor(studentId, name, kor, eng, math) {
                this.studentId = studentId;
                this.name = name;
                this.kor = kor;
                this.eng = eng;
                this.math = math;
                // í•©ê³„ ê³„ì‚°
                this.total = kor + eng + math;
                // í‰ê·  ê³„ì‚° (ì†Œìˆ˜ì  ë‘˜ì§¸ ìë¦¬ê¹Œì§€)
                this.avg = (this.total / 3).toFixed(2);
            }

            // í…Œì´ë¸” í–‰(tr) ìš”ì†Œ ìƒì„± ë©”ì„œë“œ
            toRow(index) {
                var tr = document.createElement('tr');
                // ê° ì…€ ë°ì´í„° ë°°ì—´
                var cellData = [
                    index,           // No (ìˆœë²ˆ)
                    this.studentId,  // í•™ë²ˆ
                    this.name,       // ì´ë¦„
                    this.kor,        // êµ­ì–´
                    this.eng,        // ì˜ì–´
                    this.math,       // ìˆ˜í•™
                    this.total,      // í•©ê³„
                    this.avg         // í‰ê· 
                ];
                // forë¬¸ìœ¼ë¡œ ê° ì…€ ìƒì„±
                for (var i = 0; i < cellData.length; i++) {
                    var td = document.createElement('td');
                    td.textContent = cellData[i];
                    tr.appendChild(td);
                }
                return tr;
            }
        }*/
      // êµìˆ˜ë‹˜
      class Student {
        id = undefined;
        name = undefined;
        #grades = undefined;
        #sum = undefined;
        #avg = undefined;

        constructor(
          argId,
          argName,
          argKorean = 0,
          argMath = 0,
          argEnglish = 0,
        ) {
          this.id = argId;
          this.name = argName;
          this.#grades = [argKorean, argMath, argEnglish];
          this.#calcStats();
        }

        #calcStats() {
          this.#sum = this.#grades.reduce((acc, v) => acc + v, 0);
          this.#avg = this.#sum / this.#grades.length;
        }

        setGrade(argIndex, argScore) {
          if (argIndex < 0 || argIndex >= this.#grades.length) return false;

          this.#grades[argIndex] = argScore;
          this.#calcStats();
          return true;
        }

        get sum() {
          return this.#sum;
        }
        get avg() {
          return this.#avg;
        }
      }

      // ===== ì „ì—­ ë³€ìˆ˜ =====
      var students = []; // í•™ìƒ ê°ì²´ ì €ì¥ ë°°ì—´

      // ===== DOM ìš”ì†Œ ì°¸ì¡° =====
      var form = document.getElementById("studentForm");
      var tableBody = document.getElementById("tableBody");
      var noDataMsg = document.getElementById("noData");

      // ===== ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜ =====
      function validateInput(studentId, name, kor, eng, math) {
        // í•™ë²ˆ ë¹ˆ ê°’ ì²´í¬
        if (studentId.trim() === "") {
          alert("í•™ë²ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
          return false;
        }
        // ì´ë¦„ ë¹ˆ ê°’ ì²´í¬
        if (name.trim() === "") {
          alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
          return false;
        }
        // ì ìˆ˜ ìˆ«ì ë° ë²”ìœ„ ì²´í¬
        if (isNaN(kor) || kor < 0 || kor > 100) {
          alert("êµ­ì–´ ì ìˆ˜ëŠ” 0~100 ì‚¬ì´ì˜ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");
          return false;
        }
        if (isNaN(eng) || eng < 0 || eng > 100) {
          alert("ì˜ì–´ ì ìˆ˜ëŠ” 0~100 ì‚¬ì´ì˜ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");
          return false;
        }
        if (isNaN(math) || math < 0 || math > 100) {
          alert("ìˆ˜í•™ ì ìˆ˜ëŠ” 0~100 ì‚¬ì´ì˜ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");
          return false;
        }
        return true;
      }

      // ===== í…Œì´ë¸” ë Œë”ë§ í•¨ìˆ˜ =====
      function renderTable() {
        // ê¸°ì¡´ tbody ë‚´ìš© ì´ˆê¸°í™”
        tableBody.innerHTML = "";

        // ë°ì´í„° ì—†ì„ ë•Œ ë©”ì‹œì§€ í‘œì‹œ/ìˆ¨ê¹€
        if (students.length === 0) {
          noDataMsg.style.display = "block";
          return;
        }
        noDataMsg.style.display = "none";

        // forë¬¸ìœ¼ë¡œ ê° í•™ìƒ í–‰ ì¶”ê°€
        for (var i = 0; i < students.length; i++) {
          var row = students[i].toRow(i + 1); // ìˆœë²ˆì€ 1ë¶€í„° ì‹œì‘
          tableBody.appendChild(row);
        }
      }

      // ===== í¼ ì´ˆê¸°í™” í•¨ìˆ˜ =====
      function resetForm() {
        document.getElementById("studentId").value = "";
        document.getElementById("name").value = "";
        document.getElementById("kor").value = "";
        document.getElementById("eng").value = "";
        document.getElementById("math").value = "";
      }

      // ===== í¼ ì œì¶œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ =====
      form.addEventListener("submit", function (event) {
        // ê¸°ë³¸ í¼ ì œì¶œ ë™ì‘ ë°©ì§€
        event.preventDefault();

        // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
        var studentId = document.getElementById("studentId").value;
        var name = document.getElementById("name").value;
        var kor = parseInt(document.getElementById("kor").value);
        var eng = parseInt(document.getElementById("eng").value);
        var math = parseInt(document.getElementById("math").value);

        // ìœ íš¨ì„± ê²€ì‚¬ - ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨
        if (!validateInput(studentId, name, kor, eng, math)) {
          return;
        }

        // Student ê°ì²´ ìƒì„±
        var student = new Student(studentId, name, kor, eng, math);

        // ë°°ì—´ì— ì¶”ê°€
        students.push(student);

        // í¼ ì´ˆê¸°í™”
        resetForm();

        // í…Œì´ë¸” ì¬ë Œë”ë§
        renderTable();
      });

      // ===== ì´ˆê¸° ë Œë”ë§ =====
      renderTable();
    </script>
  </body>
</html>
